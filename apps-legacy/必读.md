**项目结构**

1. 该目Apps-Legacy录下项目均为原始项目,后面慢慢会重构成各个微服务项目,例如Apps.MoreJee.Data/Export/Service等等
2. ApiServer可以直接使用docker部署
3. 该目录下的shells文件里有常用的docker部署相关的脚本,使用的时候请不要用管理员身份运行(因为用管理员运行控制台的文件路径是system32,而脚本依赖当前文件路径,其实不用管理员身份运行也没有啥问题,如果有360等杀毒软件拦截请允许)
4. 目前公司ApiServer以docker-compose方式部署,自动部署ApiServer相关的依赖比如数据库和工具网站,已经不使用linux系统安装的数据库,可以一次性完成项目部署;ApiServer等相关的项目,没有自建nginx映射,请使用linux系统nginx将域名映射到各个端口
5. 该目录下的.env为项目基础环境变量信息,是各个项目公共的配置,比如GUID的长度设置和数据库管理员的账号和名称等等
6. docker-compose.yml是docker-compose部署文件,docker-compose.XXX.yml是override文件

**docker-compose.yml示例与说明**
```
version: '3.4'
services:
    dmzpostgresdb:
    ...
    dmzapiserver:
    ...
    dmztoolsite_for_dmzapiserver:
    ...
    dmzapiserver_dev:
    ...
    dmztoolsite_for_dmzapiserver_dev:
    ....
```
> 1. dmzapiserver,dmzapiserver_dev是ApiServer项目,其中dmzapiserver是生产环境,dmzapiserver_dev是测试环境;
> 2. dmztoolsite_for_dmzapiserver,dmztoolsite_for_dmzapiserver_dev是配套的工具网站(订单浏览界面,全景图浏览界面等),dmztoolsite_for_dmzapiserver顾名思义,是dmzapiserver的配套网站,注意,配套网站镜像目前为了方便发布到docker-hub,后期再考虑更方便和保密的方式,因为该项目是js镜像,没有写在该解决方案里面
> 3. service下的每一个项目,比如dmzapiserver,dmztoolsite_for_dmzapiserver里面都含有ports,environment(具体查看docker-compose文件), ports是运行端口,environment里面包含项目的配置变量(比如数据库链接语句等等),如果需要更改,请直接在docker-compose.XXX.yml里面写,运行时候docker-compose.yml相关信息会被覆盖,所以请不要改动docker-compose源文件里面的信息
> 4. 目前docker-compose.bamboo.yml是公司开发测试的部署配置文件,需要部署请执行shells文件夹里面的bamboo_deploy.bat文件,注意bat运行完后请直接关闭控制台,不要按Ctrl+C,那样会停止当前项目的部署
> 5. dmzpostgresdb是postgres数据库镜像,具体链接方式请查看dmzapiserver environment配置(Server=dmzpostgresdb;Port=5432;Database=dmz;User Id=${PostgresDB_User};Password=${PostgresDB_Password},PostgresDB_User,PostgresDB_Password变量保存在.env里面)
